trigger: none

# parameters:
# - name: parameter
#   displayName: parameter
#   type: string
#   default: default

variables:
- name: organization
  value: quind

- name: project
  value: training-quind

stages: 
- stage: stage
  displayName: stage
  jobs:
    - job: 'job'
      pool:
        vmImage: 'ubuntu-20.04'

      steps:

      - script: |
         pip install tabulate

      - task: PythonScript@0
        inputs:
          scriptSource: 'inline'
          script: |
            import requests
            
            url = "https://dev.azure.com/$(organization)/$(project)/_apis/git/repositories?api-version=6.0"
            
            payload = {}
            headers = {
              'Authorization': f'Bearer $(System.AccessToken)'}
            
            response = requests.request("GET", url, headers=headers, data=payload)
            
            print(response.text)