trigger: none

stages:
- stage: stage
  displayName: stage
  jobs:
  - job: 'job'

    variables:
        versionSpecification: $[coalesce(variables.javaVersion, '12')]

    pool:
      vmImage: ubuntu-22.04

    steps:
    - script: |
        curl -s "https://get.sdkman.io" | bash
        source "$HOME/.sdkman/bin/sdkman-init.sh"
        sdk list java

    - script: | 
        echo "su versi√≥n: $(versionSpecification)"
        if [[ "$(versionSpecification)" != @("8"|"11"|"17"|"21") ]]; 
        then
          sdk install java $(versionSpecification).0.0-open
          echo "##vso[task.setvariable variable=JAVA_HOME_$(versionSpecification)_X64]/usr/lib/jvm/java-$(versionSpecification)-openjdk-amd64"
        fi
      displayName: 'Validate specific version'

    - task: JavaToolInstaller@0
      displayName: 'Use Java $(versionSpecification)'
      inputs:
        versionSpec: '$(versionSpecification)'
        jdkArchitectureOption: 'x64'
        jdkSourceOption: 'PreInstalled'
    - script: |
        java -version



